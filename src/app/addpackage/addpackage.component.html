<div class="container">
    <header class="jumbotron">
        <h2 class="text-center">Add Package</h2>
    </header>
    <form [formGroup]="addForm" (ngSubmit)="onSubmit()" novalidate>
        <div class="form-group">
            <ng-select
                    id="players"
                    bindLabel="firstName"
                    placeholder="Select players"
                    formControlName="players"
            >
                <ng-option [value]="item" *ngFor="let item of players">
                    {{item.firstName}}
                </ng-option>
            </ng-select>
            <div *ngIf="getControl.players.touched && getControl.players.invalid" class="text-danger">
                <div *ngIf="getControl.players.errors.required">At least one player is required.</div>
            </div>
        </div>
        <div class="row form-group">
            <div class="col">
                <input
                        [owlDateTimeTrigger]="dt1"
                        [owlDateTime]="dt1"
                        formControlName="purchaseDate"
                        placeholder="Purchase date"
                        class="form-control"
                        id="purchaseDate">
                <owl-date-time #dt1></owl-date-time>
                <div *ngIf="getControl.purchaseDate.touched && getControl.purchaseDate.invalid" class="text-danger">
                    <div *ngIf="getControl.purchaseDate.errors.required">Purchase date is required.</div>
                </div>
            </div>
            <div class="col">
                <input
                        [owlDateTimeTrigger]="dt2"
                        [owlDateTime]="dt2"
                        formControlName="validUntil"
                        placeholder="Valid Until"
                        class="form-control"
                        id="validUntil">
                <owl-date-time #dt2></owl-date-time>
                <div *ngIf="getControl.validUntil.touched && getControl.validUntil.invalid" class="text-danger">
                    <div *ngIf="getControl.validUntil.errors.required">Valid until is required.</div>
                </div>
            </div>

        </div>
        <div class="form-group">
            <input type="text" class="form-control" formControlName="amount" placeholder="Amount">
            <div *ngIf="getControl.amount.touched && getControl.amount.invalid" class="text-danger">
                <div *ngIf="getControl.amount.errors.required">Amount is required.</div>
            </div>
        </div>
        <button class="btn btn-danger btn-block" type="submit">Submit</button>
    </form>


    <div class="mt-5 table-responsive" *ngIf="packagessToAdd.length > 0">
        <table class="table table-bordered">
            <thead>
            <tr>
                <th>Players</th>
                <th>Purchase date</th>
                <th>Valid untill</th>
                <th>Amount</th>
                <th>Delete</th>
            </tr>
            </thead>

            <tbody>
            <tr *ngFor="let apackage of packagessToAdd">
                <td>
                    {{apackage.players.firstName}} {{apackage.players.lastName}}
                </td>
                <td>
                    {{apackage.purchaseDate}}
                </td>
                <td>
                    {{apackage.validUntil}}
                </td>
                <td>
                    {{apackage.amount}}
                </td>
                <td>
                    <button class="btn btn-danger" (click)="onDelete(apackage)">
                        Delete
                    </button>
                </td>
            </tr>
            </tbody>
        </table>
        <button class="mb-5 font-weight-bold text-uppercase w-25 p-3 btn btn-success mar" (click)="onAdd()">Create selected</button>
    </div>
</div>
